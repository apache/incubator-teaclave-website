"use strict";(self.webpackChunkapache_teaclave_incubating=self.webpackChunkapache_teaclave_incubating||[]).push([[9755],{1184:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var c=s(4041);const r={},l=c.createContext(r);function d(e){const n=c.useContext(l);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),c.createElement(l.Provider,{value:n},e.children)}},3243:e=>{e.exports=JSON.parse('{"permalink":"/blog/2021/10/15/developing-teaclave-application-with-teaclave-trustzone-sdk","source":"@site/blog/2021-10-15-developing-teaclave-application-with-teaclave-trustzone-sdk.md","title":"\u4f7f\u7528 Teaclave TrustZone SDK \u5f00\u53d1 TrustZone \u5e94\u7528","description":"[[TOC]]","date":"2021-10-15T00:00:00.000Z","tags":[],"hasTruncateMarker":false,"authors":[{"name":"Wenwen Ruan","key":null,"page":null}],"frontMatter":{"title":"\u4f7f\u7528 Teaclave TrustZone SDK \u5f00\u53d1 TrustZone \u5e94\u7528","date":"2021-10-15T00:00:00.000Z","author":"Wenwen Ruan"},"unlisted":false,"prevItem":{"title":"Security Advisory of SmashEx and CVE-2021-0186","permalink":"/blog/2021/11/01/security-advisory-of-smashex-and-cve-2021-0186"},"nextItem":{"title":"Teaclave Meetup #8","permalink":"/blog/2021/10/14/teaclave-meetup-8"}}')},5902:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/2021-10-15-qemu-world-execution-windows-6ac2c359fde49aa8310143bb005c6553.png"},7016:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>c,toc:()=>i});var c=s(3243),r=s(1085),l=s(1184);const d={title:"\u4f7f\u7528 Teaclave TrustZone SDK \u5f00\u53d1 TrustZone \u5e94\u7528",date:new Date("2021-10-15T00:00:00.000Z"),author:"Wenwen Ruan",slug:void 0},a=void 0,o={authorsImageUrls:[void 0]},i=[{value:"Teaclave TrustZone SDK \u5e94\u7528\u5f00\u53d1\u73af\u5883\u642d\u5efa",id:"teaclave-trustzone-sdk-\u5e94\u7528\u5f00\u53d1\u73af\u5883\u642d\u5efa",level:2},{value:"\u51c6\u5907\u6761\u4ef6",id:"\u51c6\u5907\u6761\u4ef6",level:3},{value:"\u914d\u7f6e Teaclave TrustZone SDK \u7f16\u8bd1\u73af\u5883",id:"\u914d\u7f6e-teaclave-trustzone-sdk-\u7f16\u8bd1\u73af\u5883",level:3},{value:"\u5728 QEMU ARMv8 \u4e0a\u8fd0\u884c Teaclave TrustZone SDK \u5e94\u7528\u7a0b\u5e8f",id:"\u5728-qemu-armv8-\u4e0a\u8fd0\u884c-teaclave-trustzone-sdk-\u5e94\u7528\u7a0b\u5e8f",level:3},{value:"\u914d\u7f6e Teaclave TrustZone SDK \u5e94\u7528\u7a0b\u5e8f\u7684 debug \u73af\u5883",id:"\u914d\u7f6e-teaclave-trustzone-sdk-\u5e94\u7528\u7a0b\u5e8f\u7684-debug-\u73af\u5883",level:3},{value:"Teaclave TrustZone SDK \u793a\u4f8b hello_world-rs \u5256\u6790",id:"teaclave-trustzone-sdk-\u793a\u4f8b-hello_world-rs-\u5256\u6790",level:2},{value:"<code>hello_world-rs</code> \u76ee\u5f55\u7ed3\u6784",id:"hello_world-rs-\u76ee\u5f55\u7ed3\u6784",level:3},{value:"<code>hello_world-rs</code> \u91cd\u8981\u4ee3\u7801\u6587\u4ef6\u89e3\u6790",id:"hello_world-rs-\u91cd\u8981\u4ee3\u7801\u6587\u4ef6\u89e3\u6790",level:3},{value:"\u7f16\u8bd1\u4e4b\u540e\u7684 <code>hello_world-rs</code> \u4ee3\u7801\u76ee\u5f55",id:"\u7f16\u8bd1\u4e4b\u540e\u7684-hello_world-rs-\u4ee3\u7801\u76ee\u5f55",level:3},{value:"\u5f00\u53d1\u8005\u5982\u4f55\u5f00\u53d1\u81ea\u5df1\u7684 Teaclave TrustZone SDK \u5e94\u7528\u7a0b\u5e8f",id:"\u5f00\u53d1\u8005\u5982\u4f55\u5f00\u53d1\u81ea\u5df1\u7684-teaclave-trustzone-sdk-\u5e94\u7528\u7a0b\u5e8f",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2},{value:"\u5ef6\u4f38\u9605\u8bfb",id:"\u5ef6\u4f38\u9605\u8bfb",level:2}];function t(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"[[TOC]]"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.a,{href:"https://teaclave.apache.org/blog/2021-03-15-welcome-rust-optee-trustzone-sdk-cn/",children:"\u6b22\u8fce RUST OP-TEE TRUSTZONE SDK \u6210\u4e3a TEACLAVE \u5b50\u9879\u76ee"})," \u4e00\u6587\u4e2d\u5df2\u7ecf\u5bf9Teaclave TrustZone SDK \u9879\u76ee\u8fdb\u884c\u4e86\u7b80\u5355\u7684\u4ecb\u7ecd\u3002\u5728\u672c\u6587\u4e2d\uff0c\u5c06\u4f1a\u4ecb\u7ecd\u4f7f\u7528 Teaclave TrustZone SDK \u5f00\u53d1 TrustZone \u5e94\u7528\u7a0b\u5e8f\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"teaclave-trustzone-sdk-\u5e94\u7528\u5f00\u53d1\u73af\u5883\u642d\u5efa",children:"Teaclave TrustZone SDK \u5e94\u7528\u5f00\u53d1\u73af\u5883\u642d\u5efa"}),"\n",(0,r.jsx)(n.h3,{id:"\u51c6\u5907\u6761\u4ef6",children:"\u51c6\u5907\u6761\u4ef6"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ubuntu \u7cfb\u5217"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"\u672c\u6587\u57fa\u4e8e\u7684 Teaclave TrustZone SDK \u63d0\u4ea4\u54c8\u5e0c\u503c\uff1a8520a2018705edcebfb7e729bd2ced12414fc052"})}),"\n",(0,r.jsx)(n.h3,{id:"\u914d\u7f6e-teaclave-trustzone-sdk-\u7f16\u8bd1\u73af\u5883",children:"\u914d\u7f6e Teaclave TrustZone SDK \u7f16\u8bd1\u73af\u5883"}),"\n",(0,r.jsx)(n.p,{children:"\u4e0b\u8f7d Teaclave TrustZone SDK \u9879\u76ee\uff0c\u521d\u59cb\u5316\u76f8\u5173\u7684\u5b50\u6a21\u5757\u5e76\u5b89\u88c5 Rust \u5de5\u5177\u94fe\u4ee5\u53ca\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177 Xargo\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ git clone https://github.com/apache/incubator-teaclave-trustzone-sdk\n$ cd incubator-teaclave-trustzone-sdk\n$ ./setup.sh\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u521d\u59cb\u5316 OP-TEE \u5b50\u6a21\u5757\u3002\u521d\u59cb\u5316\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5728 ",(0,r.jsx)(n.code,{children:"optee"})," \u6839\u76ee\u5f55\u4e0b\u9700\u8981\u6709 ",(0,r.jsx)(n.code,{children:"build/"}),", ",(0,r.jsx)(n.code,{children:"optee_os/"})," \u548c ",(0,r.jsx)(n.code,{children:"optee_client"})," \u5b50\u76ee\u5f55\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ git submodule update --init -- optee\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u7f16\u8bd1\u6837\u4f8b\u4e4b\u524d\uff0c\u9700\u8981\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ source environment\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u76ee\u6807\u5e73\u53f0\u662f ",(0,r.jsx)(n.code,{children:"aarch64"}),"\uff0c\u5982\u679c\u5e0c\u671b\u4e3a ",(0,r.jsx)(n.code,{children:"arm"})," \u5e73\u53f0\u7f16\u8bd1\uff0c\u9700\u8981\u5728 ",(0,r.jsx)(n.code,{children:"source environment"})," \u4e4b\u524d\u8bbe\u7f6e ",(0,r.jsx)(n.code,{children:"ARCH"})," \u53d8\u91cf\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ export ARCH=arm\n$ source environment\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u7740\uff0c\u4e0b\u8f7d ARM \u5de5\u5177\u94fe\u5e76\u7f16\u8bd1 OP-TEE \u5e93\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"make optee\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6700\u540e\uff0c\u7f16\u8bd1 Teaclave TrustZone SDK \u5b98\u65b9\u63d0\u4f9b\u7684\u4f8b\u5b50\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"make examples\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5728-qemu-armv8-\u4e0a\u8fd0\u884c-teaclave-trustzone-sdk-\u5e94\u7528\u7a0b\u5e8f",children:"\u5728 QEMU ARMv8 \u4e0a\u8fd0\u884c Teaclave TrustZone SDK \u5e94\u7528\u7a0b\u5e8f"}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\uff0cTeaclave TrustZone SDK \u5b98\u65b9\u63d0\u4f9b\u7684\u793a\u4f8b\u5df2\u7ecf\u7f16\u8bd1\u597d\u4e86\uff0c\u4f46\u5982\u679c\u9700\u8981\u5728 QEMU ARMv8 \u6a21\u62df\u5668\u4e0a\u8fd0\u884c\u8fd9\u4e9b\u793a\u4f8b\uff0c\u8fd8\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u652f\u6301 OP-TEE \u7684 QEMU \u73af\u5883\uff0c\u4ece\u800c\u5728\u8be5\u73af\u5883\u4e0a\u8fd0\u884c\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684 SDK \u4e2d\u7684\u793a\u4f8b\u3002\n\u9996\u5148\uff0c\u9700\u8981\u5b89\u88c5 QEMU \u73af\u5883\u9700\u8981\u7684\u4f9d\u8d56\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ sudo apt-get install android-tools-adb android-tools-fastboot autoconf \\\n        automake bc bison build-essential ccache cscope curl device-tree-compiler \\\n        expect flex ftp-upload gdisk iasl libattr1-dev libc6:i386 libcap-dev \\\n        libfdt-dev libftdi-dev libglib2.0-dev libhidapi-dev libncurses5-dev \\\n        libpixman-1-dev libssl-dev libstdc++6:i386 libtool libz1:i386 make \\\n        mtools netcat python-crypto python3-crypto python-pyelftools \\\n        python3-pycryptodome python3-pyelftools python-serial python3-serial \\\n        rsync unzip uuid-dev xdg-utils xterm xz-utils zlib1g-dev\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 Teaclave TrustZone SDK \u5b98\u65b9\u63d0\u4f9b\u7684 docker\uff0c\u5728 docker \u4e2d\u5f00\u53d1\u5c31\u65e0\u9700\u4e0b\u8f7d\u4e0a\u8ff0\u4f9d\u8d56\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ docker pull teaclave/teaclave-trustzone-sdk-build:0.2.1\n# start docker\n$ docker run -ti teaclave/teaclave-trustzone-sdk-build:0.2.1\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e0b\u8f7d QEMU ARMv8 \u5bf9\u5e94\u7684 OP-TEE \u7684\u6e90\u4ee3\u7801\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ mkdir -p ~/bin\n$ curl https://storage.googleapis.com/git-repo-downloads/repo-1 > ~/bin/repo && chmod a+x ~/bin/repo\n$ export PATH=~/bin:$PATH\n$ mkdir optee-qemuv8-3.14.0 && cd optee-qemuv8-3.14.0 && \\\n  repo init -u https://github.com/OP-TEE/manifest.git -m qemu_v8.xml -b 3.14.0 && \\\n  repo sync -j4 --no-clone-bundle\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7f16\u8bd1 QEMU ARMv8 OP-TEE\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ cd build\n$ make -j2 toolchains && \\\n  make QEMU_VIRTFS_ENABLE=y CFG_TEE_RAM_VA_SIZE=0x00300000\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u6f2b\u957f\u7684\u7f16\u8bd1\u8fc7\u7a0b\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u65b0\u5efa\u4e00\u4e2a\u5171\u4eab\u6587\u4ef6\u5939\uff0c\u7528\u4e8e\u548c QEMU \u5b50\u7cfb\u7edf\u5171\u4eab\u793a\u4f8b\u7684 host apps \u548c TAs\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u9996\u5148\u8981\u5c06 ",(0,r.jsx)(n.code,{children:"path/to/example/host/target/aarch64-unknown-linux-gnu/release/example"})," \u548c ",(0,r.jsx)(n.code,{children:"path/to/example/ta/target/aarch64-unknown-optee-trustzone/release/*.ta"})," \u5206\u522b\u590d\u5236\u5230 ",(0,r.jsx)(n.code,{children:"incubator-teaclave-trustzone-sdk/out/host"})," \u548c ",(0,r.jsx)(n.code,{children:"incubator-teaclave-trustzone-sdk/out/ta/"}),"\u3002\u63a5\u7740\u8fd8\u9700\u8981\u5c06 ",(0,r.jsx)(n.code,{children:"incubator-teaclave-trustzone-sdk/out/*"})," \u4e2d\u7684\u6587\u4ef6\u590d\u5236\u5230 QEMU \u5171\u4eab\u6587\u4ef6\u5939 ",(0,r.jsx)(n.code,{children:"shared_folder/"})," \u4e2d\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ mkdir shared_folder\n$ (cd /project/root/dir/ && make examples-install)\n$ cp -r /project/root/dir/out/* shared_folder/\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u5904\u4e8e\u4e00\u4e2a\u6ca1\u6709 GUI \u7684\u8fd0\u884c\u73af\u5883\uff0c\u5728\u542f\u52a8 QEMU \u4e4b\u524d\uff0c\u8fd8\u9700\u8981\u4fee\u6539 ",(0,r.jsx)(n.code,{children:"qemu_v8.mk"})," \u4e2d\u7684\u4ee3\u7801\u3002\u4ee5 OP-TEE QEMU 3.14.0 \u7248\u672c\u4e3a\u4f8b\uff0c\u6ce8\u91ca\u6389 ",(0,r.jsx)(n.code,{children:"optee-qemuv8-3.14.0/build/qemu_v8.mk"})," \u4e2d\u7684 386-388 \u884c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-makefile",children:'.PHONY: run-only\nrun-only:\n        ln -sf $(ROOT)/out-br/images/rootfs.cpio.gz $(BINARIES_PATH)/\n        $(call check-terminal)\n        $(call run-help)\n        # $(call launch-terminal,54320,"Normal World")\n        # $(call launch-terminal,54321,"Secure World")\n        # $(call wait-for-ports,54320,54321)\n        cd $(BINARIES_PATH) && $(QEMU_BUILD)/aarch64-softmmu/qemu-system-aarch64 \\\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u542f\u52a8 QEMU \u4e4b\u524d\u524d\uff0c\u9700\u8981\u8fd0\u884c ",(0,r.jsx)(n.code,{children:"nc"})," \u6765\u76d1\u542c\u7aef\u53e3 ",(0,r.jsx)(n.code,{children:"54320"})," \u548c ",(0,r.jsx)(n.code,{children:"54321"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ nc -l 127.0.0.1 -p 54320\n$ nc -l 127.0.0.1 -p 54321\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8fdb\u5165 ",(0,r.jsx)(n.code,{children:"qemu_v8.mk"})," \u6240\u5728\u7684\u76ee\u5f55\u542f\u52a8 QEMU\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"make run-only QEMU_VIRTFS_ENABLE=y QEMU_VIRTFS_HOST_DIR=$(pwd)/shared_folder\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5f53 QEMU \u542f\u52a8\u4e4b\u540e\uff0c\u7aef\u53e3 ",(0,r.jsx)(n.code,{children:"54320"})," \u7a97\u53e3\u4e2d\u8fd0\u884c\u7684\u662f\u666e\u901a\u4e16\u754c\uff0c\u7aef\u53e3 ",(0,r.jsx)(n.code,{children:"54321"})," \u7a97\u53e3\u4e2d\u8fd0\u884c\u7684\u662f\u5b89\u5168\u4e16\u754c\u3002\u5728\u666e\u901a\u4e16\u754c\u4e2d\uff0c\u6839\u636e\u63d0\u793a\u8f93\u5165 ",(0,r.jsx)(n.code,{children:"root"})," \u767b\u5f55\u540e\uff0c\u9700\u8981\u5c06\u5171\u4eab\u6587\u4ef6\u5939\u6302\u8f7d\u5230 QEMU \u5b50\u7cfb\u7edf\u4e2d\uff0c\u7528\u4e8e\u5728 QEMU \u4e2d\u8bbf\u95ee\u7f16\u8bd1\u597d\u7684 CA/TA \u53ef\u6267\u884c\u6587\u4ef6\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ mkdir shared && mount -t 9p -o trans=virtio host shared\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u63a5\u7740\uff0c\u9700\u8981\u5c06 TA \u590d\u5236\u5230 ",(0,r.jsx)(n.code,{children:"/lib/optee_armtz"})," \u76ee\u5f55\u4e0b\uff0c\u63d0\u4f9b\u7ed9\u5b89\u5168\u4e16\u754c\u8c03\u7528\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ cd shared && cp ta/*.ta /lib/optee_armtz/\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8fdb\u5165 ",(0,r.jsx)(n.code,{children:"host"})," \u6587\u4ef6\u5939\u4e2d\u5e76\u6267\u884c host apps\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ cd host\n$ ./hello_world\noriginal value is 29\ninc value is 129\ndec value is 29\nSuccess\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u81f3\u6b64\uff0c\u6211\u4eec\u6210\u529f\u5730\u5728 QEMU \u73af\u5883\u4e2d\u8fd0\u884c\u4e86 Teaclave TrustZone SDK \u7684 ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u793a\u4f8b\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u914d\u7f6e-teaclave-trustzone-sdk-\u5e94\u7528\u7a0b\u5e8f\u7684-debug-\u73af\u5883",children:"\u914d\u7f6e Teaclave TrustZone SDK \u5e94\u7528\u7a0b\u5e8f\u7684 debug \u73af\u5883"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u96be\u514d\u4f1a\u6709 debug \u7684\u9700\u6c42\uff0c\u5728\u8fd9\u4e0d\u4e00\u90e8\u5206\uff0c\u5c06\u4f1a\u7b80\u5355\u4ecb\u7ecd\u5982\u4f55\u5728 Teaclave TrustZone SDK \u4e2d\u914d\u7f6e debug \u73af\u5883\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u7f16\u8bd1 QEMU ARMv8 OPTEE \u65f6\u9700\u8981\u5173\u95ed ASLR\uff0c\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u4fee\u6539 ",(0,r.jsx)(n.code,{children:"OP-TEE/optee_os/mk/config.mk"})," \u6587\u4ef6\u4e2d\u7684 ",(0,r.jsx)(n.code,{children:"CFG_CORE_ASLR"})," \u4e3a ",(0,r.jsx)(n.code,{children:"n"}),"\uff0c\u6ce8\u610f\u4fee\u6539\u4e4b\u540e\u8fd8\u9700\u8981\u91cd\u65b0\u7f16\u8bd1 ",(0,r.jsx)(n.code,{children:"make run"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-makefile",children:"# CFG_CORE_ASLR ?= y\nCFG_CORE_ASLR ?= n\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u7f16\u8bd1\u65f6\u6dfb\u52a0\u7f16\u8bd1\u4fe1\u606f\uff1a ",(0,r.jsx)(n.code,{children:"make run CFG_CORE_ASLR=n"}),"\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u7531\u4e8e\u7a0b\u5e8f\u662f\u5728\u8fdc\u7a0b\u7cfb\u7edf\u4e0a (QEMU) \u4e0a\u88ab debugged\uff0c\u6240\u4ee5\u5728\u7f16\u8bd1\u65f6\u8fd8\u9700\u8981\u52a0\u4e0a ",(0,r.jsx)(n.code,{children:"GDBSERVER=y"}),"\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u542f\u52a8 gdb \u4e4b\u540e\uff0c\u6267\u884c ",(0,r.jsx)(n.code,{children:"target remote :1234"})," \u547d\u4ee4\u8fde\u63a5\u4e0a QEMU GDB \u670d\u52a1\u5668\u7aef\u53e3\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'$ ./path/to/qemu-v8-project/out-br/host/bin/aarch64-buildroot-linux-gnu-gdb\n(gdb) target remote :1234\nRemote debugging using :1234\nwarning: No executable has been specified and target does not support\ndetermining executable automatically.  Try using the "file" command.\n0xffffb30b00ea12b4 in ?? ()\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\uff0c\u52a0\u8f7d TEE \u5185\u6838\u7b26\u53f7\u8868\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"(gdb) symbol-file /path/to/qemu-v8-project/optee_os/out/arm/core/tee.elf\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4ee5 ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u4e3a\u4f8b\uff0c\u6839\u636e\u5b89\u5168\u4e16\u754c\u7a97\u53e3\u63d0\u793a\uff0c\u53ef\u77e5 ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u7684 TA text \u90e8\u5206\u7684\u8d77\u59cb\u5730\u5740\u4e3a 0x40014000\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"D/LD:  ldelf:168 ELF (133af0ca-bdab-11eb-9130-43bf7873bf67) at 0x40014000\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6839\u636e\u8be5\u5730\u5740\u63d0\u793a\uff0c\u4ece\u8be5\u5730\u5740\u5f00\u59cb\u52a0\u8f7d ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u7684 ta \u7b26\u53f7\u8868\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"(gdb) add-symbol-file /path/to/examples/hello_world-rs/ta/target/aarch64-unknown-optee-trustzone/debug/ta 0x40014000\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u5728\u76f8\u5e94\u7684\u51fd\u6570\u6216\u5730\u5740\u4e0a\u6253\u65ad\u70b9\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"(gdb) b open_session\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"QEMU \u6267\u884c\u793a\u610f\u56fe",src:s(5902).A+"",width:"1900",height:"1064"})}),"\n",(0,r.jsx)(n.h2,{id:"teaclave-trustzone-sdk-\u793a\u4f8b-hello_world-rs-\u5256\u6790",children:"Teaclave TrustZone SDK \u793a\u4f8b hello_world-rs \u5256\u6790"}),"\n",(0,r.jsxs)(n.h3,{id:"hello_world-rs-\u76ee\u5f55\u7ed3\u6784",children:[(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u76ee\u5f55\u7ed3\u6784"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 host\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.lock\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.toml\n\u2502\xa0\xa0 \u251c\u2500\u2500 Makefile\n\u2502\xa0\xa0 \u2514\u2500\u2500 src\n\u2502\xa0\xa0     \u2514\u2500\u2500 main.rs\n\u251c\u2500\u2500 proto\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.toml\n\u2502\xa0\xa0 \u251c\u2500\u2500 build.rs\n\u2502\xa0\xa0 \u2514\u2500\u2500 src\n\u2502\xa0\xa0     \u2514\u2500\u2500 lib.rs\n\u251c\u2500\u2500 ta\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.lock\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.toml\n\u2502\xa0\xa0 \u251c\u2500\u2500 Makefile\n\u2502\xa0\xa0 \u251c\u2500\u2500 Xargo.toml\n\u2502\xa0\xa0 \u251c\u2500\u2500 build.rs\n\u2502\xa0\xa0 \u251c\u2500\u2500 src\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 main.rs\n\u2502\xa0\xa0 \u251c\u2500\u2500 ta_aarch64.lds\n\u2502\xa0\xa0 \u251c\u2500\u2500 ta_arm.lds\n\u2502\xa0\xa0 \u2514\u2500\u2500 ta_static.rs\n\u2514\u2500\u2500 uuid.txt\n\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"host"})," \u6587\u4ef6\u5939\u4e2d\u5b58\u653e\u7684\u662f\u666e\u901a\u4e16\u754c\u7684 ",(0,r.jsx)(n.code,{children:"untrusted code"}),"\u3002\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"host/src/main.rs"})," \u662f ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u7684\u5165\u53e3\uff0c",(0,r.jsx)(n.code,{children:"Cargo.toml"})," \u63cf\u8ff0\u4e86 ",(0,r.jsx)(n.code,{children:"host"})," \u90e8\u5206\u7684\u4f9d\u8d56\uff0c ",(0,r.jsx)(n.code,{children:"Cargo.lock"})," \u4e2d\u5305\u542b\u4e86\u4f9d\u8d56\u9879\u7684\u5b8c\u6574\u4fe1\u606f\uff0c",(0,r.jsx)(n.code,{children:"Makefile"})," \u5b9a\u4e49\u4e86 ",(0,r.jsx)(n.code,{children:"host"})," \u90e8\u5206\u7684\u7f16\u8bd1\u4fe1\u606f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ta"})," \u6587\u4ef6\u5939\u4e2d\u5b58\u653e\u7684\u662f\u5b89\u5168\u4e16\u754c\u4e2d\u7684 ",(0,r.jsx)(n.code,{children:"trusted code"}),"\u3002\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u76f8\u6bd4\u8f83 ",(0,r.jsx)(n.code,{children:"host"}),"\uff0c",(0,r.jsx)(n.code,{children:"ta"})," \u6587\u4ef6\u5939\u4e2d\u591a\u4e86\u4ee5\u4e0b\u6587\u4ef6\uff1a",(0,r.jsx)(n.code,{children:"Xargo.toml"})," \u662f TA \u7684\u4ea4\u53c9\u7f16\u8bd1\u6587\u4ef6 \uff0c",(0,r.jsx)(n.code,{children:"ta_aarch64.lds"})," \u548c ",(0,r.jsx)(n.code,{children:"ta_arm.lds"})," \u5206\u522b\u5b9a\u4e49\u4e86\u5728 64 \u4f4d\u67b6\u6784\u548c 32 \u4f4d\u67b6\u6784\u4e0b teaclave trustzone sdk \u5e94\u7528\u7a0b\u5e8f\u5404\u90e8\u5206\u5728\u7a0b\u5e8f\u5730\u5740\u7a7a\u95f4\u5185\u7684\u5e03\u5c40\uff1b",(0,r.jsx)(n.code,{children:"ta_static.rs"})," \u5b9a\u4e49\u4e86 TA \u4e2d\u7684\u9759\u6001\u6570\u636e\u4fe1\u606f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"proto"})," \u6587\u4ef6\u5939\u4e2d\u5b58\u653e\u7684\u662f CA (Client Application) \u548c TA (Trusted Application) \u5171\u4eab\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u627f\u62c5\u7740\u89e3\u6790 ",(0,r.jsx)(n.code,{children:"uuid.txt"})," \u63d0\u53d6 UUID \u7684\u4efb\u52a1\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"uuid.txt"})," \u6587\u4ef6\u4e2d\u8bb0\u5f55\u7684\u662f TA \u7684 UUID\uff0c\u662f\u6bcf\u4e2a TA \u72ec\u4e00\u65e0\u4e8c\u7684\u8eab\u4efd\u6807\u8bc6\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"hello_world-rs-\u91cd\u8981\u4ee3\u7801\u6587\u4ef6\u89e3\u6790",children:[(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u91cd\u8981\u4ee3\u7801\u6587\u4ef6\u89e3\u6790"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"host/src/main.rs"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u8fdb\u5165 ",(0,r.jsx)(n.code,{children:"main"})," \u51fd\u6570\uff0c\u9996\u5148\u8c03\u7528 ",(0,r.jsx)(n.code,{children:"Context::new"})," \u51fd\u6570\u5efa\u7acb\u8d77 ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," CA \u548c TA \u7684\u903b\u8f91\u8054\u7cfb\uff0c",(0,r.jsx)(n.code,{children:"ctx"})," \u6307\u5411\u7c7b\u578b\u4e3a ",(0,r.jsx)(n.code,{children:"Context"})," \u7684\u53d8\u91cf\u7684\u5730\u5740\uff0c\u7528\u4e8e CA \u548c TA \u7684\u8fde\u63a5\u548c\u901a\u4fe1\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"let mut ctx = Context::new()?;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8c03\u7528 ",(0,r.jsx)(n.code,{children:"open_session"})," \u5728 CA \u548c\u5bf9\u5e94\u7684 TA \u4e2d\u6253\u5f00\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"session"}),"\uff0c\u5e76\u5c06 ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u7684 UUID \u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\uff0c\u7528\u4e8e\u6307\u5f15 CA \u8fde\u63a5\u5bf9\u5e94 UUID \u503c\u7684 TA\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"let uuid = Uuid::parse_str(UUID).unwrap();\nlet mut session = ctx.open_session(uuid)?;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5c06 ",(0,r.jsx)(n.code,{children:"&mut session"})," \u4f5c\u4e3a\u53c2\u6570\u4f20\u5165 ",(0,r.jsx)(n.code,{children:"hello_world"})," \u51fd\u6570\u4e2d\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"hello_world(&mut session)?;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8fdb\u5165\u5230 ",(0,r.jsx)(n.code,{children:"hello_world"})," \u51fd\u6570\u4e2d\uff0c\u9996\u5148\u5c06\u8981\u8fdb\u884c\u8fd0\u7b97\u7684 ",(0,r.jsx)(n.code,{children:"u32"})," \u64cd\u4f5c\u6570\u7528 ",(0,r.jsx)(n.code,{children:"ParamValue"})," \u7c7b\u578b\u5305\u88c5\u4e3a\u64cd\u4f5c\u6570 ",(0,r.jsx)(n.code,{children:"p0"}),"\uff0c\u8bbe\u7f6e\u5176\u503c\u4e3a29\uff0c\u7c7b\u578b\u4e3a ",(0,r.jsx)(n.code,{children:"ValueInout"}),"\uff0c\u8868\u793a\u540c\u65f6\u4f5c\u4e3a\u8f93\u5165\u53c2\u6570\u548c\u8fd4\u56de\u503c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"let p0 = ParamValue::new(29, 0, ParamType::ValueInout);\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"operation"})," \u7528\u4e8e\u4fdd\u5b58 CA \u8981\u4f20\u9012\u7ed9 TA \u7684\u53c2\u6570\u4fe1\u606f\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e00\u822c\u4fdd\u7559\u4e3a 0\uff0c\u7531\u4e8e\u8fd9\u91cc\u53ea\u6709\u4e00\u4e2a\u8981\u4f20\u9012\u7684\u53c2\u6570 ",(0,r.jsx)(n.code,{children:"p0"}),"\uff0c\u5176\u4ed6\u53c2\u6570\u90fd\u4fdd\u7559\u4e3a ",(0,r.jsx)(n.code,{children:"ParamNone"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"let mut operation = Operation::new(0, p0, ParamNone, ParamNone, ParamNone);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["CA \u7aef\u4f7f\u7528\u83b7\u53d6\u5230\u7684 ",(0,r.jsx)(n.code,{children:"session"}),", ",(0,r.jsx)(n.code,{children:"command_id"})," \u548c\u8981\u4f20\u9012\u7684\u53c2\u6570 ",(0,r.jsx)(n.code,{children:"operation"})," \u8c03\u7528 ",(0,r.jsx)(n.code,{children:"invoke_command"})," \u6267\u884c\u7279\u5b9a\u7684 ",(0,r.jsx)(n.code,{children:"command"}),"\uff0c\u8be5\u64cd\u4f5c\u5c06\u4f1a\u5207\u6362\u5230\u5b89\u5168\u4e16\u754c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"session.invoke_command(Command::IncValue as u32, &mut operation)?;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ta/src/main.rs"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ta/src/main.rs"})," \u4e2d\u7684 ",(0,r.jsx)(n.code,{children:"invoke_command"})," \u51fd\u6570\u53c2\u6570\u4e0e host \u4e2d\u8c03\u7528\u7684 ",(0,r.jsx)(n.code,{children:"invoke_command"})," \u7565\u6709\u4e0d\u540c\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f ",(0,r.jsx)(n.code,{children:"Paramters"})," \u7c7b\u578b\u3002\u5f53\u6570\u636e\u4ece CA \u4f20\u9012\u5230 TA \u65f6\uff0c\u5b9e\u9645\u4e0a\u6267\u884c\u7684\u662f\u6309 bit \u7684\u590d\u5236\u64cd\u4f5c\uff0c\u6240\u4ee5 ",(0,r.jsx)(n.code,{children:"params"})," \u4e2d\u7684\u6570\u636e\u5c31\u662f\u4ece ",(0,r.jsx)(n.code,{children:"operation"})," \u4e2d\u4f20\u9012\u8fc7\u6765\u7684\u6570\u636e."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"fn invoke_command(cmd_id: u32, params: &mut Parameters) -> Result<()> {\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"values"})," \u4ece ",(0,r.jsx)(n.code,{children:"params"})," \u53d6\u51fa\u8981\u64cd\u4f5c\u7684 ",(0,r.jsx)(n.code,{children:"u32"})," \u503c\uff0c",(0,r.jsx)(n.code,{children:"match"})," \u8868\u8fbe\u5f0f\u6839\u636e\u4f20\u5165\u7684\u53c2\u6570 ",(0,r.jsx)(n.code,{children:"cmd_id"})," \u5339\u914d\u5bf9\u5e94\u7684\u64cd\u4f5c\u3002\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u5339\u914d\u5230 ",(0,r.jsx)(n.code,{children:"Command::IncValue"}),"\uff0c\u5c31\u5bf9 ",(0,r.jsx)(n.code,{children:"values"})," \u4e2d\u7684 ",(0,r.jsx)(n.code,{children:"u32"})," \u503c\u6267\u884c +100 \u7684\u64cd\u4f5c\uff1b\u5982\u679c\u5339\u914d\u5230 ",(0,r.jsx)(n.code,{children:"Command::DecValue"}),"\uff0c\u5c31\u6267\u884c -100 \u7684\u64cd\u4f5c\uff1b\u5982\u679c\u5339\u914d\u5230\u5176\u4ed6\u503c\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u9519\u8bef\u53c2\u6570\u7684\u9519\u8bef\u7c7b\u578b\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'fn invoke_command(cmd_id: u32, params: &mut Parameters) -> Result<()> {\n    trace_println!("[+] TA invoke command");\n    let mut values = unsafe { params.0.as_value().unwrap() };\n    match Command::from(cmd_id) {\n        Command::IncValue => {\n            values.set_a(values.a() + 100);\n            Ok(())\n        }\n        Command::DecValue => {\n            values.set_a(values.a() - 100);\n            Ok(())\n        }\n        _ => Err(Error::new(ErrorKind::BadParameters)),\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"proto/src/lib.rs"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"lib.rs"})," \u4e2d\u7684\u679a\u4e3e\u53d8\u91cf ",(0,r.jsx)(n.code,{children:"Command"})," \u58f0\u660e\u662f\u5f00\u53d1\u8005\u8981\u5b9e\u73b0\u7684\u547d\u4ee4\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"pub enum Command {\n    IncValue,\n    DecValue,\n    Unknown,\n}\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"\u7f16\u8bd1\u4e4b\u540e\u7684-hello_world-rs-\u4ee3\u7801\u76ee\u5f55",children:["\u7f16\u8bd1\u4e4b\u540e\u7684 ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u4ee3\u7801\u76ee\u5f55"]}),"\n",(0,r.jsxs)(n.p,{children:["\u7f16\u8bd1\u4e4b\u540e\u7684\u4ee3\u7801\u76ee\u5f55\u5982\u4e0b\u6240\u793a\uff0c\u8fd9\u91cc\u7701\u7565\u4e86 ",(0,r.jsx)(n.code,{children:"release"})," \u6587\u4ef6\u5939\u4e0b\u7684\u5185\u5bb9\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 host\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.lock\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.toml\n\u2502\xa0\xa0 \u251c\u2500\u2500 Makefile\n\u2502\xa0\xa0 \u251c\u2500\u2500 src\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 main.rs\n\u2502\xa0\xa0 \u2514\u2500\u2500 target                               #[generate] \n\u2502\xa0\xa0     \u251c\u2500\u2500 aarch64-unknown-linux-gnu        #[generate] \n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2514\u2500\u2500 release                      #[generate]\n\u2502\xa0\xa0     \u2514\u2500\u2500 release                          #[generate]\n\u251c\u2500\u2500 proto\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.lock\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.toml\n\u2502\xa0\xa0 \u251c\u2500\u2500 build.rs\n\u2502\xa0\xa0 \u251c\u2500\u2500 src\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 lib.rs\n\u2502\xa0\xa0 \u2514\u2500\u2500 target                               #[generate]\n\u2502\xa0\xa0     \u2514\u2500\u2500 rls                              #[generate]\n\u2502\xa0\xa0         \u2514\u2500\u2500 debug                        #[generate]\n\u251c\u2500\u2500 ta\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.lock\n\u2502\xa0\xa0 \u251c\u2500\u2500 Cargo.toml\n\u2502\xa0\xa0 \u251c\u2500\u2500 Makefile\n\u2502\xa0\xa0 \u251c\u2500\u2500 Xargo.toml\n\u2502\xa0\xa0 \u251c\u2500\u2500 build.rs\n\u2502\xa0\xa0 \u251c\u2500\u2500 src\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 main.rs\n\u2502\xa0\xa0 \u251c\u2500\u2500 ta_aarch64.lds\n\u2502\xa0\xa0 \u251c\u2500\u2500 ta_arm.lds\n\u2502\xa0\xa0 \u251c\u2500\u2500 ta_static.rs\n\u2502\xa0\xa0 \u2514\u2500\u2500 target                               #[generate]\n\u2502\xa0\xa0     \u251c\u2500\u2500 aarch64-unknown-optee-trustzone  #[generate]\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2514\u2500\u2500 release                      #[generate]\n\u2502\xa0\xa0     \u2514\u2500\u2500 release                          #[generate]\n\u2514\u2500\u2500 uuid.txt\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u7f16\u8bd1\u8fc7\u7a0b\u66f4\u7c7b\u4f3c\u4e8e Rust \u7a0b\u5e8f\u7f16\u8bd1\u3002"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u7f16\u8bd1\u4e0d\u53ef\u4fe1\u90e8\u5206 host \u6587\u4ef6\u5939\uff0c\u751f\u6210 ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u53ef\u6267\u884c\u6587\u4ef6\uff1b"]}),"\n",(0,r.jsxs)(n.li,{children:["\u4ea4\u53c9\u7f16\u8bd1\u53ef\u4fe1\u90e8\u5206 ta \u6587\u4ef6\u5939\uff0c\u518d\u7528 UUID \u548c\u5bc6\u94a5\u8fdb\u884c\u7b7e\u540d\uff0c\u751f\u6210 ",(0,r.jsx)(n.code,{children:"UUID.ta"})," \u53ef\u6267\u884c\u6587\u4ef6\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728\u6267\u884c\u65f6\uff0c",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u5bf9 ",(0,r.jsx)(n.code,{children:"UUID.ta"})," \u9a8c\u8bc1\u901a\u8fc7\u540e\u8c03\u7528\u6267\u884c\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5f00\u53d1\u8005\u5982\u4f55\u5f00\u53d1\u81ea\u5df1\u7684-teaclave-trustzone-sdk-\u5e94\u7528\u7a0b\u5e8f",children:"\u5f00\u53d1\u8005\u5982\u4f55\u5f00\u53d1\u81ea\u5df1\u7684 Teaclave TrustZone SDK \u5e94\u7528\u7a0b\u5e8f"}),"\n",(0,r.jsxs)(n.p,{children:["\u548c\u524d\u9762\u4ecb\u7ecd\u8fc7\u7684 ",(0,r.jsx)(n.a,{href:"https://teaclave.apache.org/blog/2021-08-25-developing-sgx-application-with-teaclave-sgx-sdk/",children:"\u4f7f\u7528 TEACLAVE SGX SDK \u5f00\u53d1 SGX \u5e94\u7528"})," \u76f8\u4f3c\uff0c\u8fd9\u91cc\u4e5f\u540c\u6837\u901a\u8fc7\u5bf9 Teaclave TrustZone SDK \u793a\u4f8b\u7a0b\u5e8f ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u8fdb\u884c\u6539\u5199\u6765\u4ecb\u7ecd\u5982\u4f55\u6784\u9020\u81ea\u5df1\u7684 Teaclave TrustZone SDK\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cTeaclave TrustZone SDK \u662f\u901a\u8fc7 UUID \u552f\u4e00\u6807\u8bc6\u7cfb\u7edf\u4e2d\u7684 TA\uff0cUUID \u503c\u4e0d\u80fd\u91cd\u590d\uff0c\u6240\u4ee5\u6211\u4eec\u9996\u5148\u9700\u8981\u901a\u8fc7 ",(0,r.jsx)(n.a,{href:"https://www.itu.int/en/ITU-T/asn1/Pages/UUID/uuids.aspx",children:"ITU-T UUID generator"})," \u7f51\u7ad9\u7533\u8bf7\u5c5e\u4e8e\u81ea\u5df1\u7684\u552f\u4e00\u7684 UUID\uff0c\u5e76\u5c06 ",(0,r.jsx)(n.code,{children:"uuid.rs"})," \u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u4fee\u6539\u4e3a\u65b0\u5f97\u5230\u7684 UUID \u503c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"1487a406-160d-4641-957e-66292f8d1309\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5047\u8bbe\u5f00\u53d1\u76ee\u6807\u662f\u4e3a\u4e24\u4e2a ",(0,r.jsx)(n.code,{children:"u8"})," \u6570\u7ec4\u6c42\u5f97\u4ea4\u96c6\u548c\u5e76\u96c6\uff0c\u4e5f\u5c31\u662f\u8981\u5b9e\u73b0\u4ea4\u96c6\u51fd\u6570 ",(0,r.jsx)(n.code,{children:"Intersection"})," \u548c\u5e76\u96c6\u51fd\u6570 ",(0,r.jsx)(n.code,{children:"Union"})," \u4e24\u4e2a\u529f\u80fd\u51fd\u6570\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5bf9 ",(0,r.jsx)(n.code,{children:"proto/lib.rs"})," \u8fdb\u884c\u4fee\u6539\uff0c\u5c06 ",(0,r.jsx)(n.code,{children:"Command"})," \u4e2d\u7684\u6210\u5458\u66ff\u6362\u4e3a\u5f85\u5b9e\u73b0\u7684 ",(0,r.jsx)(n.code,{children:"Intersection"})," \u548c ",(0,r.jsx)(n.code,{children:"Union"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"pub enum Command {\n    Intersection,\n    Union,\n    Unknown,\n}\n\nimpl From<u32> for Command {\n    #[inline]\n    fn from(value: u32) -> Command {\n        match value {\n            0 => Command::Intersection,\n            1 => Command::Union,\n            _ => Command::Unknown,\n        }\n    }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u63a5\u7740\uff0c\u8fdb\u5165 ",(0,r.jsx)(n.code,{children:"host/src/main.rs"})," \u4e2d\u7684 ",(0,r.jsx)(n.code,{children:"main"})," \u51fd\u6570\uff0c\u6dfb\u52a0\u8fdb\u884c\u6570\u636e\u8ba1\u7b97\u7684\u51fd\u6570\uff0c\u5c06\u7528\u4e8e\u4e0e TA \u901a\u4fe1\u7684 session \u5185\u5b58\u5730\u5740\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u5230 ",(0,r.jsx)(n.code,{children:"data_compute"})," \u4e2d\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"data_compute(&mut session)?;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"data_compute"})," \u4e2d\uff0c\u9996\u5148\u58f0\u660e\u8981\u8fdb\u884c\u6570\u636e\u5904\u7406\u7684\u4e24\u4e2a ",(0,r.jsx)(n.code,{children:"u8"})," \u6570\u7ec4 ",(0,r.jsx)(n.code,{children:"nums1"})," \u548c ",(0,r.jsx)(n.code,{children:"nums2"}),"\uff0c\u4ee5\u53ca\u7528\u4e8e\u5b58\u50a8\u6570\u636e\u5904\u7406\u7ed3\u679c\u7684 ",(0,r.jsx)(n.code,{children:"resu"}),"\u3002\u5728\u793a\u4f8b\u4ee3\u7801 ",(0,r.jsx)(n.code,{children:"hello_world"})," \u4e2d\u7684\u53d8\u91cf\u58f0\u660e\u4f7f\u7528\u7684\u662f ",(0,r.jsx)(n.code,{children:"ParamValue"}),"\uff0c\u4f46\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u8bbf\u95ee\u6570\u7ec4\uff0c\u4e00\u6bb5\u8fde\u7eed\u7684\u5185\u5b58\u53d8\u91cf\u800c\u975e\u53d8\u91cf\u3002\u901a\u8fc7\u9605\u8bfb Teaclave TrustZone SDK client \u7aef\u7684 Rust \u4ed3\u5e93 ",(0,r.jsx)(n.a,{href:"https://teaclave.apache.org/api-docs/trustzone-sdk/optee-teec/optee_teec/index.html",children:"Crate optee_teec"}),"\uff0c\u53ef\u77e5 ",(0,r.jsx)(n.code,{children:"ParamTmpRef"})," \u7528\u4e8e\u5b9a\u4e49\u4e34\u65f6\u5185\u5b58\u8bbf\u95ee\u3002\u4e8e\u662f\u5c06\u8fd9\u4e09\u4e2a\u6570\u7ec4\u5730\u5740\u4f5c\u4e3a\u53c2\u6570\u65b0\u5efa ",(0,r.jsx)(n.code,{children:"ParamTmpRef"})," \u7c7b\u578b\uff0c\u5e76\u5c06 ",(0,r.jsx)(n.code,{children:"ParamTmpRef"})," \u7c7b\u578b\u53d8\u91cf\u4f20\u9012\u5230 ",(0,r.jsx)(n.code,{children:"operation"})," \u4e2d\uff0c\u7528\u4e8e\u4f20\u9012\u7ed9 TA \u4ea4\u4e92\u4fe1\u606f\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u51c6\u5907\u597d\u4e0e TA \u4ea4\u4e92\u7684\u4fe1\u606f\u540e\uff0c\u8c03\u7528 ",(0,r.jsx)(n.code,{children:"invoke_command"})," \u901a\u77e5\u5bf9\u5e94\u7684 TA \u6267\u884c ",(0,r.jsx)(n.code,{children:"Command::Intersection"})," \u6307\u5b9a\u7684\u64cd\u4f5c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'// in host/src/main.rs\nfn data_compute(session: &mut Session) -> optee_teec::Result<()> {\n    let nums1:[u8; 5] = [1, 2, 3, 4, 5];\n    let nums2:[u8; 5] = [4, 5, 6, 7, 8];\n    let mut resu = vec![0; 10];\n\n    let p1 = ParamTmpRef::new_input(&nums1);\n    let p2 = ParamTmpRef::new_input(&nums2);\n    let p3 = ParamTmpRef::new_output(&mut resu);\n    let mut operation = Operation::new(0, p1, p2, p3, ParamNone);\n\n    println!("intersection invoke");\n    session.invoke_command(Command::Intersection as u32, &mut operation)?;\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"invoke_command"})," \u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\u5728 ",(0,r.jsx)(n.code,{children:"ta/sec/main.rs"})," \u6587\u4ef6\u4e2d\u7684 ",(0,r.jsx)(n.code,{children:"invoke_command"}),"\u3002\u5171\u4eab\u7684\u53c2\u6570\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"params"})," \u4ece CA \u4f20\u9012\u5230 TA \u4e2d\uff0c\n\u540c\u6837\uff0c\u53ef\u4ee5\u6839\u636e TA \u7aef\u7684 Rust \u4ed3\u5e93 ",(0,r.jsx)(n.a,{href:"https://teaclave.apache.org/api-docs/trustzone-sdk/optee-utee/optee_utee/index.html",children:"optee_utee"})," \u63d0\u4f9b\u7684\u63a5\u53e3\u51fd\u6570\u62bd\u4e1d\u5265\u8327\u822c\u5730\u63d0\u53d6\u51fa\u6765 ",(0,r.jsx)(n.code,{children:"ParamMemref"})," \u7c7b\u578b\u7684 ",(0,r.jsx)(n.code,{children:"nums1"}),", ",(0,r.jsx)(n.code,{children:"nums2"})," \u548c ",(0,r.jsx)(n.code,{children:"vec_resu"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"    let nums1 = unsafe { params.0.as_memref().unwrap().raw() };\n    let nums2 = unsafe { params.1.as_memref().unwrap().raw() };\n    let mut vec_resu = unsafe { params.2.as_memref().unwrap().raw() };\n\n    let nums1_size = unsafe { (*nums1).size };\n    let nums2_size = unsafe { (*nums2).size };\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u73b0\u5728\uff0c\u8fdb\u5165 ",(0,r.jsx)(n.code,{children:"match"})," \u8868\u8fbe\u5f0f\u4e2d\uff0c\u5c06 ",(0,r.jsx)(n.code,{children:"Command::from"})," \u7684\u679a\u4e3e\u4fee\u6539\u4e3a ",(0,r.jsx)(n.code,{children:"Command::Intersection"})," \u548c ",(0,r.jsx)(n.code,{children:"Command::Union"}),"\u3002\u8981\u5b9e\u73b0\u7684\u51fd\u6570\u5c31\u586b\u5145\u5230\u5bf9\u5e94\u7684\u5206\u652f\u62ec\u53f7\u4e2d\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"  match Command::from(cmd_id) {\n    Command::Intersection => {\n      Ok(())\n    }\n    Command::Union => {\n      Ok(())\n    }\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4e0b\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u5b9e\u73b0\u7684\u662f\u6c42\u4e24\u4e2a\u6570\u7ec4\u4e4b\u95f4\u7684\u4ea4\u96c6\u5143\u7d20\u3002\u5177\u4f53\u7684\u5b9e\u73b0\u662f\u901a\u8fc7\u4e00\u4e2a\u989d\u5916\u7684\u6563\u5217\u96c6 ",(0,r.jsx)(n.code,{children:"set"}),"\uff0c\u8bb0\u5f55 ",(0,r.jsx)(n.code,{children:"nums1"})," \u4e2d\u7684\u6240\u6709\u5143\u7d20\uff0c\u7136\u540e\u5bf9 ",(0,r.jsx)(n.code,{children:"nums2"})," \u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u904d\u5386\uff0c\u5982\u679c ",(0,r.jsx)(n.code,{children:"nums2"})," \u4e2d\u7684\u5143\u7d20\u4e5f\u51fa\u73b0\u5728\u4e86 ",(0,r.jsx)(n.code,{children:"set"})," \u4e2d\uff0c\u90a3\u4e48\u8be5\u5143\u7d20\u4e3a ",(0,r.jsx)(n.code,{children:"nums1"})," \u548c ",(0,r.jsx)(n.code,{children:"nums2"})," \u5171\u6709\uff0c\u662f\u4ea4\u96c6\u5143\u7d20\uff0c\u5199\u5165\u7ed3\u679c\u5411\u91cf ",(0,r.jsx)(n.code,{children:"vec_resu"})," \u4e2d\uff0c\u5e76\u79fb\u9664\u6389 ",(0,r.jsx)(n.code,{children:"set"})," \u4e2d\u7684\u8be5\u5143\u7d20\u3002\u6700\u540e\uff0c\u5c06\u7ed3\u679c\u5411\u91cf\u7684 ",(0,r.jsx)(n.code,{children:"size"})," \u4fee\u6539\u4e3a\u5171\u6709\u7684\u4ea4\u96c6\u5143\u7d20\u7684\u4e2a\u6570\u3002\u5176\u4e2d\uff0c\u8981\u8bfb\u53d6 ",(0,r.jsx)(n.code,{children:"nums1"})," \u548c ",(0,r.jsx)(n.code,{children:"nums2"})," \u6570\u7ec4\u4e2d\u7684\u5143\u7d20\uff0c\u8fd8\u9700\u8981\u89e3\u5f15\u7528 ",(0,r.jsx)(n.code,{children:"ParamMemref"})," \u7c7b\u578b\u7684\u6307\u9488\u8bfb\u53d6\u51fa\u6307\u5411\u5143\u7d20\u503c\u7684 ",(0,r.jsx)(n.code,{children:"buffer"})," \u6307\u9488\u5730\u5740\uff0c\u518d\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"offset"})," \u504f\u79fb\u6307\u9488\u4ece\u800c\u8bfb\u51fa ",(0,r.jsx)(n.code,{children:"nums1"})," \u548c ",(0,r.jsx)(n.code,{children:"nums2"})," \u7684\u503c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"      let mut set: HashSet<u8> = HashSet::new();\n      let mut vec_count = 0;\n      for i in 0..nums1_size {\n        let mut val_nums1 = 0;\n        unsafe {\n          val_nums1 = *((*nums1).buffer as *mut u8).offset(i as isize);\n        };\n        set.insert(val_nums1);\n      }\n\n      for i in 0..nums2_size {\n        let mut val_nums2 = 0;\n        unsafe {\n          val_nums2 = *((*nums2).buffer as *mut u8).offset(i as isize);\n        };\n\n        if set.contains(&val_nums2) {\n          unsafe { *((*vec_resu).buffer as *mut u8).offset(vec_count as isize) = val_nums2; }\n          vec_count += 1;\n          set.remove(&val_nums2);\n        }\n      }\n      unsafe{ (*vec_resu).size = vec_count; }\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5bf9\u4e8e ",(0,r.jsx)(n.code,{children:"Union"})," \u51fd\u6570\u7684\u5b9e\u73b0\uff0c\u540c\u6837\u662f\u5229\u7528\u4e00\u4e2a\u989d\u5916\u7684\u6563\u5217\u96c6 ",(0,r.jsx)(n.code,{children:"set"}),"\uff0c\u8bb0\u5f55 ",(0,r.jsx)(n.code,{children:"nums1"})," \u4e2d\u7684\u6240\u6709\u5143\u7d20\uff0c\u5e76\u76f4\u63a5\u5c06 ",(0,r.jsx)(n.code,{children:"nums1"})," \u4e2d\u7684\u5143\u7d20\u5199\u5165\u7ed3\u679c\u5411\u91cf ",(0,r.jsx)(n.code,{children:"vec_resu"})," \u4e2d\uff0c\u800c\u540e\u518d\u4f9d\u6b21\u8bfb\u53d6 ",(0,r.jsx)(n.code,{children:"nums2"})," \u4e2d\u7684\u5143\u7d20\uff0c\u5982\u679c\u8be5\u5143\u7d20\u6ca1\u6709\u5728 ",(0,r.jsx)(n.code,{children:"set"})," \u4e2d\u51fa\u73b0\uff0c\u5219\u5199\u5165\u7ed3\u679c\u5411\u91cf ",(0,r.jsx)(n.code,{children:"vec_resu"})," \u548c\u6563\u5217\u96c6 ",(0,r.jsx)(n.code,{children:"set"})," \u4e2d\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:"      let mut set: HashSet<u8> = HashSet::new();\n      let mut vec_count = 0;\n      for i in 0..nums1_size {\n        let mut val_nums1 = 0;\n        unsafe {\n          val_nums1 = *((*nums1).buffer as *mut u8).offset(i as isize);\n          *((*vec_resu).buffer as *mut u8).offset(vec_count as isize) = val_nums1;\n        }\n        vec_count += 1;\n        set.insert(val_nums1);\n      }\n\n      for i in 0..nums2_size {\n        let mut val_nums2 = 0;\n        unsafe {\n          val_nums2 = *((*nums2).buffer as *mut u8).offset(i as isize);\n        };\n\n        if !set.contains(&val_nums2) {\n          unsafe { *((*vec_resu).buffer as *mut u8).offset(vec_count as isize) = val_nums2; }\n          vec_count += 1;\n          set.insert(val_nums2);\n        }\n      }\n      unsafe{ (*vec_resu).size = vec_count; }\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u56de\u5230 ",(0,r.jsx)(n.code,{children:"host/src/main.rs"}),"\uff0c\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"updated_size"})," \u51fd\u6570\u8bfb\u53d6\u5230\u5728 ",(0,r.jsx)(n.code,{children:"ta/src/main.rs"})," \u4e2d\u5bf9 ",(0,r.jsx)(n.code,{children:"vec_resu"})," \u65b0\u8bbe\u7f6e\u7684 ",(0,r.jsx)(n.code,{children:"size"})," \u503c\uff0c\u4e5f\u5c31\u662f ",(0,r.jsx)(n.code,{children:"nums1"})," \u548c ",(0,r.jsx)(n.code,{children:"nums2"})," \u5171\u6709\u7684\u5143\u7d20\u7684\u4e2a\u6570\uff0c\u6700\u540e\u6253\u5370\u51fa\u7ed3\u679c\u5411\u91cf ",(0,r.jsx)(n.code,{children:"resu"})," \u7684\u503c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'    // in data_compute function\n    let updated_size = operation.parameters().2.updated_size();\n    println!("Intersection resu = {:?}", &resu[..updated_size]);\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u57fa\u4e8e Teaclave TrustZone SDK \u63d0\u4f9b\u7684\u793a\u4f8b\u4ee3\u7801\u5b9e\u73b0\u4e86\u81ea\u5df1\u7684\u6c42\u4ea4\u96c6\u548c\u5e76\u96c6\u51fd\u6570\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,r.jsxs)(n.p,{children:["\u672c\u6587\u9996\u5148\u4ecb\u7ecd Teaclave TrustZone SDK \u9879\u76ee\u7684\u73af\u5883\u914d\u7f6e\u8fc7\u7a0b\uff0c\u7136\u540e\u4ecb\u7ecd\u4e86\u7b80\u5355\u793a\u4f8b ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u7684\u7ec4\u7ec7\u7ed3\u6784\u548c\u7f16\u8bd1\u8fc7\u7a0b \uff0c\u6700\u540e\uff0c\u901a\u8fc7\u4fee\u6539 ",(0,r.jsx)(n.code,{children:"hello_world-rs"})," \u5b9e\u73b0 ",(0,r.jsx)(n.code,{children:"intersection"})," \u548c ",(0,r.jsx)(n.code,{children:"union"})," \u51fd\u6570\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u5982\u4f55\u57fa\u4e8e\u63d0\u4f9b\u7684 SampleCode \u8fdb\u884c Teaclave TrustZone SDK \u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5ef6\u4f38\u9605\u8bfb",children:"\u5ef6\u4f38\u9605\u8bfb"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://teaclave.apache.org/trustzone-sdk-docs/",children:"Teaclave TrustZone SDK \u6587\u6863"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dl.acm.org/doi/10.1145/3427228.3427262",children:"Teaclave TrustZone SDK \u9879\u76ee\u8bba\u6587\uff1a\u300aRusTEE: Developing Memory-Safe ARM TrustZone Applications\u300b"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}}}]);