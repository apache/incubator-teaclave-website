"use strict";(self.webpackChunkapache_teaclave_incubating=self.webpackChunkapache_teaclave_incubating||[]).push([[3818],{7596:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"teaclave-faas-legacy/attestation/README","title":"Attestation in Teaclave","description":"This directory contains the implementation of the attestation in Apache","source":"@site/docs/teaclave-faas-legacy/attestation/README.md","sourceDirName":"teaclave-faas-legacy/attestation","slug":"/docs/codebase/attestation","permalink":"/docs/codebase/attestation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"permalink":"/docs/codebase/attestation","slug":"/docs/codebase/attestation"},"sidebar":"teaclave-faas-legacy_sidebar","previous":{"title":"Rust Development Guideline","permalink":"/docs/rust-guildeline"},"next":{"title":"Binder","permalink":"/docs/codebase/binder"}}');var i=n(4848),s=n(8453);const o={permalink:"/docs/codebase/attestation",slug:"/docs/codebase/attestation"},r="Attestation in Teaclave",c={},d=[{value:"How it Works",id:"how-it-works",level:2},{value:"Attestation Report",id:"attestation-report",level:2},{value:"Verification",id:"verification",level:3},{value:"Freshness",id:"freshness",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"attestation-in-teaclave",children:"Attestation in Teaclave"})}),"\n",(0,i.jsx)(t.p,{children:"This directory contains the implementation of the attestation in Apache\nTeaclave."}),"\n",(0,i.jsx)(t.p,{children:"Attestation is the process of demonstrating that a software component is running\nproperly on a Trusted Execution Environment (e.g., Intel SGX)."}),"\n",(0,i.jsx)(t.p,{children:"Teaclave combines the remote attestation with a TLS connection to improve the\ntrustworthiness of two endpoints. Once established, it has attested that the\nrunning parties are inside trusted enclaves and provided trusted channels with\nend-to-end encryption, the enclave code's identity, and other information."}),"\n",(0,i.jsx)(t.p,{children:"The platform includes several services, and each service is running inside an\nenclave. Those services communicate with mutual-attested TLS channels."}),"\n",(0,i.jsx)(t.h2,{id:"how-it-works",children:"How it Works"}),"\n",(0,i.jsx)(t.p,{children:"We integrate the attestation process in the TLS handshake. The attested-TLS\nhandshake is similar to a normal TLS handshake, except the extension of the\ncertificate includes an SGX attestation report. We make the certificate\ncryptographically bound to a specific enclave instance by adding the public key\nof the certificate in the attestation report."}),"\n",(0,i.jsxs)(t.p,{children:["During the build time, the public keys of the auditor enclaves are hard-coded in\nTeaclave services enclave, and enclave measurements and signatures are loaded\nfrom outside during the runtime. Auditor enclaves verify and sign the identity\nof each service enclave. After each service receives the attestation report, it\nwill verify whether the ",(0,i.jsx)(t.code,{children:"MR_SIGNER"})," and ",(0,i.jsx)(t.code,{children:"MR_ENCLAVE"})," from the attestation report\nmatch the identity information signed by auditor enclaves. After that, it will\nverify the TLS certificate. If all the verifications pass, a secure attested\nchannel is established between two enclaves."]}),"\n",(0,i.jsx)(t.p,{children:"Please note the trusted channel can also have one-way (client -> server)\nattestation. Under the circumstances, only the server needs to run inside TEEs."}),"\n",(0,i.jsx)(t.h2,{id:"attestation-report",children:"Attestation Report"}),"\n",(0,i.jsxs)(t.p,{children:["After one party obtains an attestation report from the received certificate.\nTeaclave first verifies the attestation report with the ",(0,i.jsx)(t.code,{children:"report_ca_cert"})," from the\nattestation service provider (e.g., IAS report root CA certificate for EPID,\nor DCAP attestation server end-entity certificate for DCAP)."]}),"\n",(0,i.jsx)(t.h3,{id:"verification",children:"Verification"}),"\n",(0,i.jsxs)(t.p,{children:["There is much information included in an attestation report such as CPU\nversion, ISV version, product ID, etc. By default, Teaclave will check\n",(0,i.jsx)(t.code,{children:"MR_ENCLAVE"})," and ",(0,i.jsx)(t.code,{children:"MR_SIGNER"}),". Users can also define a customized\nverification function to check more information in attestation reports by\nimplementing the ",(0,i.jsx)(t.code,{children:"AttestationReportVerificationFn"})," function."]}),"\n",(0,i.jsx)(t.h3,{id:"freshness",children:"Freshness"}),"\n",(0,i.jsxs)(t.p,{children:["To make sure the platform is always up-to-date and trusted, Teaclave will update\nattestation report periodically. By default, the validity time of an attestation\nreport is 3600 seconds. It can be changed in the\n",(0,i.jsx)(t.a,{href:"https://github.com/apache/incubator-teaclave/blob/master/config/build.config.toml",children:(0,i.jsx)(t.code,{children:"build.config.toml"})}),"\nfile."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var a=n(6540);const i={},s=a.createContext(i);function o(e){const t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);